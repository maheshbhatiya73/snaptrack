import{_ as O}from"./CXlwqJHU.js";import{_ as Q,r as v,G as X,p,h as R,e as Y,q as Z,c as d,a as e,F as A,y as E,t as r,b as ee,g as te,n as z,w as se,d as _,z as $,C as S,o as c}from"#entry";import{f as oe,r as re}from"./EuvIHkR0.js";const le={class:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50"},ne={key:0,class:"min-h-screen flex items-center justify-center"},ie={class:"text-center"},ae={class:"mt-2 flex justify-center space-x-1"},de={key:1,class:"min-h-screen bg-gradient-to-br from-red-50 to-white flex items-center justify-center p-4"},ce={class:"bg-white border border-red-200 rounded-2xl p-8 max-w-md w-full shadow-lg"},ue={class:"text-center"},xe={class:"text-gray-600 mb-6"},me={key:2},ve={class:"bg-white/80 backdrop-blur-sm border-b border-gray-200/50 sticky top-0 z-10"},pe={class:"px-8 py-6"},fe={class:"flex items-center justify-between"},ge={class:"flex items-center space-x-4"},ye={class:"flex items-center space-x-3"},be={class:"flex items-center space-x-2"},he={class:"text-sm font-medium text-gray-700"},_e={class:"px-8 py-8 space-y-8"},ke={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},we={class:"lg:col-span-2 bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-lg"},Ce={class:"flex items-center justify-between mb-6"},ze={class:"text-xl font-bold text-gray-800"},$e={class:"text-gray-500"},Se={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},je={class:"text-center p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-xl"},Ue={class:"text-lg font-bold text-gray-800"},Fe={class:"text-center p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl"},Ve={class:"text-lg font-bold text-gray-800"},We={class:"text-center p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl"},Me={class:"text-lg font-bold text-gray-800"},Be={class:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600"},De={class:"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-lg"},Ne={class:"text-center"},Pe={class:"flex justify-center mb-4"},Te={class:"relative inline-flex items-center justify-center"},Ie=["width","height"],Le=["cx","cy","r","stroke-width"],Re=["cx","cy","r","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],Ae={class:"absolute inset-0 flex flex-col items-center justify-center"},Ee={class:"text-2xl font-bold text-gray-800"},Ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},He={class:"flex items-center justify-between"},qe={class:"text-2xl font-bold text-gray-800 mb-1"},Je={class:"text-sm text-gray-500"},Ke={class:"relative inline-flex items-center justify-center"},Oe=["width","height"],Qe=["cx","cy","r","stroke-width"],Xe=["cx","cy","r","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],Ye={class:"absolute inset-0 flex flex-col items-center justify-center"},Ze={class:"text-2xl font-bold text-gray-800"},et={class:"flex items-center justify-between"},tt={class:"text-2xl font-bold text-gray-800 mb-1"},st={class:"text-sm text-gray-500"},ot={class:"relative inline-flex items-center justify-center"},rt=["width","height"],lt=["cx","cy","r","stroke-width"],nt=["cx","cy","r","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],it={class:"absolute inset-0 flex flex-col items-center justify-center"},at={class:"text-2xl font-bold text-gray-800"},dt={class:"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-2xl shadow-lg overflow-x-auto"},ct={key:0,class:"p-6 text-center text-gray-500"},ut={key:1,class:"overflow-x-auto max-h-96"},xt={class:"min-w-full table-auto"},mt={class:"bg-gray-50 sticky top-0 z-10"},vt={class:"bg-white divide-y divide-gray-200 text-sm text-gray-600"},pt={class:"px-4 py-2"},ft={class:"px-4 py-2"},gt=["title"],yt={class:"px-4 py-2"},bt={class:"px-4 py-2"},ht={class:"px-4 py-2"},_t={class:"px-4 py-2"},kt={class:"px-4 py-2"},wt={class:"px-4 py-2"},Ct={__name:"[id]",setup(zt){const j=(o,t)=>{o=o.replace("#","");const n=parseInt(o.substring(0,2),16),s=parseInt(o.substring(2,4),16),D=parseInt(o.substring(4,6),16);return`rgba(${n}, ${s}, ${D}, ${t})`},h=v(!0),G=X(),k=v(null),u=v({}),i=v(null),U=v(null),f=v("disconnected"),x=v(null),F=p(()=>G.params.id),g=o=>{if(o==null)return"—";const t=["B","KB","MB","GB","TB"];let n=0,s=Number(o);for(;s>=1024&&n<t.length-1;)s/=1024,n++;return`${s.toFixed(1)} ${t[n]}`},H=o=>{if(o==null)return"—";const t=Math.floor(o/86400),n=Math.floor(o%86400/3600),s=Math.floor(o%3600/60);return`${t}d ${n}h ${s}m`},q=o=>{if(!o)return"—";const{load1:t,load5:n,load15:s}=o;return t==null?"—":`${t.toFixed(2)} / ${n.toFixed(2)} / ${s.toFixed(2)}`},N={connected:{color:"bg-green-500",text:"Connected",pulse:"animate-pulse"},connecting:{color:"bg-yellow-500",text:"Connecting...",pulse:"animate-pulse"},disconnected:{color:"bg-gray-500",text:"Disconnected",pulse:""},error:{color:"bg-red-500",text:"Connection Error",pulse:"animate-pulse"}},V=p(()=>N[f.value]||N.disconnected),W=p(()=>i.value?.cpu_percent||0),a=p(()=>{const s=130*Math.PI,D=s-W.value/100*s,L=W.value>85?"#ef4444":W.value>65?"#f59e0b":"#10b981",K=j(L,.25);return{size:140,strokeWidth:10,radius:65,circumference:s,offset:D,color:L,shadowColor:K}});async function J(){h.value=!0;try{const o=await oe(),t=Array.isArray(o)?o:o?.servers||[];u.value=t.find(n=>n.id==F.value)||t.find(n=>n.enabled)||t[0]||null}catch(o){k.value=o?.message||"Failed to load server"}finally{h.value=!1}}const l={size:80,strokeWidth:6,radius:74/2,circumference:74/2*2*Math.PI},y=R({percentage:p(()=>i.value?.mem_used_bytes&&i.value?.mem_total_bytes?i.value.mem_used_bytes/i.value.mem_total_bytes*100:0),isVisible:!1}),M=p(()=>{const o=l.circumference-y.percentage/100*l.circumference,t=y.percentage>85?"#ef4444":y.percentage>65?"#f59e0b":"#10b981",n=j(t,.25);return{offset:o,color:t,shadowColor:n}}),b=R({percentage:p(()=>i.value?.disk_used_bytes&&i.value?.disk_total_bytes?i.value.disk_used_bytes/i.value.disk_total_bytes*100:0),isVisible:!1}),B=p(()=>{const o=l.circumference-b.percentage/100*l.circumference,t=b.percentage>85?"#ef4444":b.percentage>65?"#f59e0b":"#10b981",n=j(t,.25);return{offset:o,color:t,shadowColor:n}}),w=v("cpu_percent"),C=v(!0),P=p(()=>[...i.value?.processes||[]].sort((o,t)=>{const n=Number(o[w.value]??0),s=Number(t[w.value]??0);return C.value?s-n:n-s})),m=o=>{w.value===o?C.value=!C.value:(w.value=o,C.value=!0)};function T(){if(!F.value)return;x.value&&(x.value.close(),x.value=null);const o=re(F.value);f.value="connecting";const t=new WebSocket(o);x.value=t,t.onopen=()=>{f.value="connected"},t.onmessage=n=>{try{const s=JSON.parse(n.data);i.value={...i.value,...s},U.value=Date.now()}catch(s){console.error("Failed to parse WebSocket message",s)}},t.onclose=()=>{f.value="disconnected",x.value=null},t.onerror=()=>{f.value="error",k.value="Failed to connect to the server"}}const I=()=>{x.value&&x.value.close(),T()};return Y(async()=>{await J(),h.value=!0,setTimeout(()=>{h.value=!1,T(),y.isVisible=!0,b.isVisible=!0},1500)}),Z(()=>{x.value&&x.value.close()}),(o,t)=>{const n=O;return c(),d("div",le,[h.value?(c(),d("div",ne,[e("div",ie,[t[9]||(t[9]=e("div",{class:"relative"},[e("div",{class:"w-20 h-20 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto"}),e("i",{class:"i-lucide-server w-8 h-8 text-blue-600 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})],-1)),t[10]||(t[10]=e("p",{class:"mt-6 text-lg text-gray-600 font-medium"},"Connecting to server...",-1)),e("div",ae,[(c(),d(A,null,E([0,1,2],s=>e("div",{key:s,class:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:$({animationDelay:`${s*.1}s`})},null,4)),64))])])])):k.value?(c(),d("div",de,[e("div",ce,[e("div",ue,[t[11]||(t[11]=e("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("i",{class:"i-lucide-activity w-8 h-8 text-red-600"})],-1)),t[12]||(t[12]=e("h3",{class:"text-xl font-semibold text-red-800 mb-2"},"Connection Error",-1)),e("p",xe,r(k.value),1),e("button",{onClick:I,class:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors"}," Try Again ")])])])):(c(),d("div",me,[e("div",ve,[e("div",pe,[e("div",fe,[t[15]||(t[15]=e("div",{class:"flex items-center space-x-4"},[e("div",null,[e("h1",{class:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent"}," Server Monitor ")])],-1)),e("div",ge,[e("div",ye,[e("div",be,[e("div",{class:z(`w-3 h-3 rounded-full ${V.value.color} ${V.value.pulse}`)},null,2),e("span",he,r(V.value.text),1)]),f.value!=="connected"?(c(),d("button",{key:0,onClick:I,class:"flex items-center space-x-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium rounded-lg transition-colors"},[...t[13]||(t[13]=[e("i",{class:"i-lucide-refresh-cw w-3 h-3"},null,-1),e("span",null,"Reconnect",-1)])])):te("",!0)]),ee(n,{to:"/dashboard",class:"flex items-center space-x-2 px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white font-medium rounded-xl transition-colors"},{default:se(()=>[...t[14]||(t[14]=[e("span",null,"Back to Dashboard",-1)])]),_:1})])])])]),e("main",_e,[e("div",ke,[e("div",we,[e("div",Ce,[e("div",null,[e("h2",ze,r(u.value?.name||"Unnamed Server"),1),e("p",$e,r(u.value?.host),1)]),e("span",{class:z(`px-3 py-1 rounded-full text-sm font-medium ${u.value?.type==="remote"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`)},r(u.value?.type==="remote"?"Remote Server":"Local Server"),3)]),e("div",Se,[e("div",je,[t[16]||(t[16]=e("i",{class:"i-lucide-clock w-6 h-6 text-green-600 mx-auto mb-2"},null,-1)),t[17]||(t[17]=e("div",{class:"text-sm text-gray-600"},"Uptime",-1)),e("div",Ue,r(H(i.value?.uptime_seconds)),1)]),e("div",Fe,[t[18]||(t[18]=e("i",{class:"i-lucide-zap w-6 h-6 text-blue-600 mx-auto mb-2"},null,-1)),t[19]||(t[19]=e("div",{class:"text-sm text-gray-600"},"Load Average",-1)),e("div",Ve,r(q(i.value)),1)]),e("div",We,[t[20]||(t[20]=e("i",{class:"i-lucide-activity w-6 h-6 text-purple-600 mx-auto mb-2"},null,-1)),t[21]||(t[21]=e("div",{class:"text-sm text-gray-600"},"Last Update",-1)),e("div",Me,r(U.value?new Date(U.value).toLocaleTimeString():"—"),1)])]),e("div",Be,[e("div",null,[t[22]||(t[22]=e("strong",null,"SSH User:",-1)),_(" "+r(u.value?.ssh_user||"—"),1)]),e("div",null,[t[23]||(t[23]=e("strong",null,"SSH Port:",-1)),_(" "+r(u.value?.ssh_port||"—"),1)]),e("div",null,[t[24]||(t[24]=e("strong",null,"Transfer Type:",-1)),_(" "+r(u.value?.transferType||"—"),1)]),e("div",null,[t[25]||(t[25]=e("strong",null,"Status:",-1)),_(" "+r(u.value?.enabled?"Enabled":"Disabled"),1)])])]),e("div",De,[e("div",Ne,[t[26]||(t[26]=e("div",{class:"flex items-center justify-center mb-4"},[e("i",{class:"i-lucide-cpu w-6 h-6 text-blue-600 mr-2"}),e("h3",{class:"text-lg font-semibold text-gray-800"},"CPU Usage")],-1)),e("div",Pe,[e("div",Te,[(c(),d("svg",{width:a.value.size,height:a.value.size,class:"transform -rotate-90"},[e("circle",{cx:a.value.size/2,cy:a.value.size/2,r:a.value.radius,stroke:"rgba(156, 163, 175, 0.2)","stroke-width":a.value.strokeWidth,fill:"none"},null,8,Le),e("circle",{cx:a.value.size/2,cy:a.value.size/2,r:a.value.radius,stroke:a.value.color,"stroke-width":a.value.strokeWidth,fill:"none","stroke-dasharray":a.value.circumference,"stroke-dashoffset":a.value.offset,"stroke-linecap":"round",class:"transition-all duration-300 ease-in-out",style:$({filter:"drop-shadow(0 0 6px "+a.value.shadowColor+")"})},null,12,Re)],8,Ie)),e("div",Ae,[e("span",Ee,r((i.value?.cpu_percent||0).toFixed(1))+"%",1)])])]),t[27]||(t[27]=e("div",{class:"text-sm text-gray-600"}," Real-time CPU utilization ",-1))])])]),e("div",Ge,[e("div",{class:z(`bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform ${S(y).isVisible?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`)},[t[28]||(t[28]=e("div",{class:"flex items-center justify-between mb-4"},[e("div",{class:"flex items-center space-x-3"},[e("h3",{class:"text-sm font-semibold text-gray-700"},"Memory Usage")])],-1)),e("div",He,[e("div",null,[e("div",qe,r(g(i.value?.mem_used_bytes)),1),e("div",Je,r(`${g(i.value?.mem_total_bytes)} total`),1)]),e("div",Ke,[(c(),d("svg",{width:l.size,height:l.size,class:"transform -rotate-90"},[e("circle",{cx:l.size/2,cy:l.size/2,r:l.radius,stroke:"rgba(156, 163, 175, 0.2)","stroke-width":l.strokeWidth,fill:"none"},null,8,Qe),e("circle",{cx:l.size/2,cy:l.size/2,r:l.radius,stroke:M.value.color,"stroke-width":l.strokeWidth,fill:"none","stroke-dasharray":l.circumference,"stroke-dashoffset":M.value.offset,"stroke-linecap":"round",class:"transition-all duration-300 ease-in-out",style:$({filter:"drop-shadow(0 0 6px "+M.value.shadowColor+")"})},null,12,Xe)],8,Oe)),e("div",Ye,[e("span",Ze,r(S(y).percentage.toFixed(1))+"%",1)])])])],2),e("div",{class:z(`bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform ${S(b).isVisible?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`)},[t[29]||(t[29]=e("div",{class:"flex items-center justify-between mb-4"},[e("div",{class:"flex items-center space-x-3"},[e("h3",{class:"text-sm font-semibold text-gray-700"},"Disk Usage")])],-1)),e("div",et,[e("div",null,[e("div",tt,r(g(i.value?.disk_used_bytes)),1),e("div",st,r(`${g(i.value?.disk_total_bytes)} total`),1)]),e("div",ot,[(c(),d("svg",{width:l.size,height:l.size,class:"transform -rotate-90"},[e("circle",{cx:l.size/2,cy:l.size/2,r:l.radius,stroke:"rgba(156, 163, 175, 0.2)","stroke-width":l.strokeWidth,fill:"none"},null,8,lt),e("circle",{cx:l.size/2,cy:l.size/2,r:l.radius,stroke:B.value.color,"stroke-width":l.strokeWidth,fill:"none","stroke-dasharray":l.circumference,"stroke-dashoffset":B.value.offset,"stroke-linecap":"round",class:"transition-all duration-300 ease-in-out",style:$({filter:"drop-shadow(0 0 6px "+B.value.shadowColor+")"})},null,12,nt)],8,rt)),e("div",it,[e("span",at,r(S(b).percentage.toFixed(1))+"%",1)])])])],2)]),e("div",dt,[t[30]||(t[30]=e("div",{class:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-800 flex items-center"},[e("i",{class:"i-lucide-activity w-5 h-5 mr-2 text-blue-600"}),_(" Top Processes ")])],-1)),P.value.length?(c(),d("div",ut,[e("table",xt,[e("thead",mt,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:t[0]||(t[0]=s=>m("pid"))},"PID"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:t[1]||(t[1]=s=>m("user"))},"User"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:t[2]||(t[2]=s=>m("full_cmdline"))},"Command"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:t[3]||(t[3]=s=>m("cpu_percent"))},"CPU %"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:t[4]||(t[4]=s=>m("mem_percent"))},"Memory %"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:t[5]||(t[5]=s=>m("rss_bytes"))},"RSS"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:t[6]||(t[6]=s=>m("vms_bytes"))},"VMS"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:t[7]||(t[7]=s=>m("start_time"))},"Start"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:t[8]||(t[8]=s=>m("state"))},"State")])]),e("tbody",vt,[(c(!0),d(A,null,E(P.value,s=>(c(),d("tr",{key:s.pid},[e("td",pt,r(s.pid),1),e("td",ft,r(s.user),1),e("td",{class:"px-4 py-2",title:s.full_cmdline},r(s.full_cmdline),9,gt),e("td",yt,r(s.cpu_percent?.toFixed(1))+"%",1),e("td",bt,r(s.mem_percent?.toFixed(1))+"%",1),e("td",ht,r(g(s.rss_bytes)),1),e("td",_t,r(g(s.vms_bytes)),1),e("td",kt,r(s.start_time),1),e("td",wt,r(s.state),1)]))),128))])])])):(c(),d("div",ct," No processes running "))])])]))])}}},Ut=Q(Ct,[["__scopeId","data-v-1ebada88"]]);export{Ut as default};
