import{r as m,e as z,f as j,c as n,a as t,t as o,d as b,C as f,g as r,n as h,F as E,y as S,D as A,o as i}from"#entry";import{i as F,n as N,o as k}from"./EuvIHkR0.js";const $={class:"min-h-screen bg-slate-50"},V={class:"bg-white border-b border-slate-200"},L={class:"px-6 py-4"},H={class:"flex items-center justify-between"},R={class:"flex items-center space-x-4"},I={class:"text-2xl font-bold text-slate-900"},U={class:"flex items-center space-x-3"},G=["disabled"],K={class:"px-6 py-6"},O={class:"max-w-6xl mx-auto"},P={key:0,class:"flex items-center justify-center py-12"},W={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 mb-6"},q={class:"flex items-center"},J={class:"text-sm text-red-700 mt-1"},Q={key:2,class:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6"},X={class:"flex items-center"},Y={class:"text-sm text-green-700 mt-1"},Z={key:3,class:"space-y-6"},tt={class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6"},et={class:"flex items-start justify-between mb-6"},st={class:"text-xl font-semibold text-slate-900 mb-2"},lt={class:"text-slate-600"},ot={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},at={class:"text-lg font-semibold text-slate-900 capitalize"},nt={class:"text-lg font-semibold text-slate-900 uppercase"},it={class:"text-lg font-semibold text-slate-900 capitalize"},dt={key:0,class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6"},rt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ut={class:"flex items-center justify-between mb-2"},ct={class:"font-medium text-slate-900"},mt={class:"text-sm text-slate-600"},xt={class:"text-xs text-slate-500 mt-1"},pt={class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6"},gt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},vt={class:"text-lg font-semibold text-slate-900"},bt={class:"text-lg font-semibold text-slate-900"},ft={class:"text-lg font-semibold text-slate-900"},ht={class:"text-lg font-semibold text-slate-900"},kt={key:0,class:"mt-6 pt-6 border-t border-slate-200"},_t={class:"text-sm font-mono text-slate-900 break-all"},wt={class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6"},yt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Bt={class:"text-sm text-slate-900"},Ct={class:"text-sm text-slate-900"},Mt={class:"text-sm text-slate-900"},Tt={class:"text-sm font-mono text-slate-900"},Et={__name:"[id]",setup(Dt){const x=j(),p=A(),l=m(null),d=m(!1),u=m(null),g=m(null),_=()=>{x.push("/backup")},w=()=>{x.push(`/backup/edit/${p.params.id}`)},y=async()=>{try{d.value=!0,u.value=null;const s=p.params.id;l.value=await N(s)}catch(s){u.value=s.message,console.error("Failed to load backup:",s)}finally{d.value=!1}},B=s=>({pending:"bg-yellow-100 text-yellow-800",running:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",C=s=>({pending:"Pending",running:"Running",completed:"Completed",failed:"Failed",cancelled:"Cancelled"})[s]||s,M=s=>({one_time:"One Time",daily:"Daily",weekly:"Weekly",monthly:"Monthly"})[s]||s,T=s=>{if(!s||s===0)return"0 B";const e=1024,a=["B","KB","MB","GB","TB"],v=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,v)).toFixed(2))+" "+a[v]},D=s=>{if(!s||s===0)return"N/A";if(s<60)return`${s}s`;if(s<3600)return`${Math.floor(s/60)}m ${s%60}s`;const e=Math.floor(s/3600),a=Math.floor(s%3600/60);return`${e}h ${a}m`},c=s=>!s||s==="0001-01-01T05:53:28+05:53"?"Never":new Date(s).toLocaleString();return z(()=>{if(!F()){x.push("/auth/login");return}y()}),(s,e)=>(i(),n("div",$,[t("div",V,[t("div",L,[t("div",H,[t("div",R,[t("button",{onClick:_,class:"p-2 text-slate-400 hover:text-slate-600 rounded-lg hover:bg-slate-100"},[...e[1]||(e[1]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),t("div",null,[t("h1",I,o(l.value?.name||"Backup Details"),1),e[2]||(e[2]=t("p",{class:"mt-1 text-sm text-slate-600"},"View backup information and execution history",-1))])]),t("div",U,[t("button",{onClick:w,class:"inline-flex items-center px-4 py-2 bg-slate-100 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-200 transition-colors duration-200"},[...e[3]||(e[3]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),b(" Edit ",-1)])]),t("button",{onClick:e[0]||(e[0]=(...a)=>f(k)&&f(k)(...a)),disabled:d.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50"},[e[4]||(e[4]=t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6-8h8a2 2 0 012 2v8a2 2 0 01-2 2H8a2 2 0 01-2-2V6a2 2 0 012-2z"})],-1)),b(" "+o(d.value?"Executing...":"Execute Now"),1)],8,G)])])])]),t("main",K,[t("div",O,[d.value&&!l.value?(i(),n("div",P,[...e[5]||(e[5]=[t("div",{class:"text-center"},[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t("p",{class:"mt-4 text-slate-600"},"Loading backup details...")],-1)])])):u.value?(i(),n("div",W,[t("div",q,[e[7]||(e[7]=t("svg",{class:"w-5 h-5 text-red-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",null,[e[6]||(e[6]=t("h3",{class:"text-sm font-medium text-red-800"},"Error loading backup",-1)),t("p",J,o(u.value),1)])])])):r("",!0),g.value?(i(),n("div",Q,[t("div",X,[e[9]||(e[9]=t("svg",{class:"w-5 h-5 text-green-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",null,[e[8]||(e[8]=t("h3",{class:"text-sm font-medium text-green-800"},"Success",-1)),t("p",Y,o(g.value),1)])])])):r("",!0),l.value?(i(),n("div",Z,[t("div",tt,[t("div",et,[t("div",null,[t("h2",st,o(l.value.name),1),t("p",lt,o(l.value.source)+" â†’ "+o(l.value.destination),1)]),t("span",{class:h(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",B(l.value.status)])},o(C(l.value.status)),3)]),t("div",ot,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"Backup Type",-1)),t("p",at,o(l.value.type),1)]),t("div",null,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"File Type",-1)),t("p",nt,o(l.value.file_type),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"Schedule",-1)),t("p",it,o(M(l.value.schedule_type)),1)])])]),l.value.servers&&l.value.servers.length>0?(i(),n("div",dt,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-slate-900 mb-4"},"Target Servers",-1)),t("div",rt,[(i(!0),n(E,null,S(l.value.servers,a=>(i(),n("div",{key:a.id,class:"border border-slate-200 rounded-lg p-4"},[t("div",ut,[t("h4",ct,o(a.name),1),t("span",{class:h(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",a.enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},o(a.enabled?"Enabled":"Disabled"),3)]),t("p",mt,o(a.host)+":"+o(a.ssh_port),1),t("p",xt,"User: "+o(a.ssh_user),1)]))),128))])])):r("",!0),t("div",pt,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-slate-900 mb-4"},"Execution Details",-1)),t("div",gt,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"Size",-1)),t("p",vt,o(T(l.value.size_bytes)),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"Duration",-1)),t("p",bt,o(D(l.value.duration_sec)),1)]),t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"Started At",-1)),t("p",ft,o(c(l.value.started_at)),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"Completed At",-1)),t("p",ht,o(c(l.value.completed_at)),1)])]),l.value.checksum?(i(),n("div",kt,[e[18]||(e[18]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide mb-2"},"Checksum",-1)),t("p",_t,o(l.value.checksum),1)])):r("",!0)]),t("div",wt,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-slate-900 mb-4"},"Metadata",-1)),t("div",yt,[t("div",null,[e[20]||(e[20]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"Created At",-1)),t("p",Bt,o(c(l.value.created_at)),1)]),t("div",null,[e[21]||(e[21]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"Updated At",-1)),t("p",Ct,o(c(l.value.updated_at)),1)]),t("div",null,[e[22]||(e[22]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"Executed By",-1)),t("p",Mt,o(l.value.executed_by||"N/A"),1)]),t("div",null,[e[23]||(e[23]=t("p",{class:"text-sm font-medium text-slate-500 uppercase tracking-wide"},"Backup ID",-1)),t("p",Tt,o(l.value.id),1)])])])])):r("",!0)])])]))}};export{Et as default};
