import{f as S,r as c,e as H,q as R,c as l,o as a,a as e,g as B,t as i,n as N,d as f,F as A,y as E,p as q,s as D,k as F,v as O,l as U,x as V}from"#entry";import{i as G,p as P,o as I,q as K}from"./EuvIHkR0.js";import{_ as Q}from"./DQgf2YDm.js";import{_ as W}from"./UZfrgli-.js";const Y={class:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow group"},J={class:"p-6"},X={class:"flex items-start justify-between mb-6"},Z={class:"flex-1"},ee={class:"flex items-center space-x-3 mb-2"},te={class:"text-lg font-semibold text-gray-900"},se={class:"text-sm text-gray-600"},oe={class:"flex items-center space-x-3"},re={class:"relative"},ne={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-10"},ae={class:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},le={class:"space-y-1"},ie={class:"text-sm font-semibold text-gray-900"},ue={class:"space-y-1"},de={class:"text-sm font-semibold text-gray-900 capitalize"},ce={class:"space-y-1"},pe={class:"text-sm font-semibold text-gray-900 uppercase"},me={class:"space-y-1"},ge={class:"text-sm font-semibold text-gray-900"},xe={class:"flex items-center justify-between text-sm"},ve={class:"flex items-center space-x-6"},fe={class:"flex items-center space-x-2"},ke={class:"text-gray-500"},he={key:0,class:"flex items-center space-x-2"},ye={class:"text-gray-500"},be={key:0,class:"flex items-center space-x-2 text-gray-500"},we={key:0,class:"mt-6 pt-4"},Be={class:"flex flex-wrap gap-2"},Ce={__name:"BackupCard",props:{backup:{type:Object,required:!0}},emits:["edit","delete","execute"],setup(n,{emit:C}){const p=n,m=C,x=S(),u=c(!1),k=()=>{u.value=!u.value},h=()=>{u.value=!1,x.push(`/backup/${p.backup.id}`)},$=()=>{u.value=!1,x.push(`/backup/edit/${p.backup.id}`)},y=()=>{u.value=!1,m("execute",p.backup.id)},b=()=>{u.value=!1,m("delete",p.backup.id)},_=o=>({pending:"bg-gray-100 text-gray-800",running:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-yellow-100 text-yellow-800"})[o]||"bg-gray-100 text-gray-800",j=o=>({pending:"Pending",running:"Running",completed:"Completed",failed:"Failed",cancelled:"Cancelled"})[o]||o,w=o=>({one_time:"One Time",daily:"Daily",weekly:"Weekly",monthly:"Monthly"})[o]||o,T=o=>{if(!o||o===0)return"0 B";const t=1024,g=["B","KB","MB","GB","TB"],v=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,v)).toFixed(2))+" "+g[v]},M=o=>{if(!o||o==="0001-01-01T05:53:28+05:53")return"Never";const t=new Date(o);return t.toLocaleDateString()+" "+t.toLocaleTimeString()},L=o=>{if(o<60)return`${o}s`;if(o<3600)return`${Math.floor(o/60)}m ${o%60}s`;const t=Math.floor(o/3600),g=Math.floor(o%3600/60);return`${t}h ${g}m`},z=o=>{o.target.closest(".relative")||(u.value=!1)};return H(()=>{document.addEventListener("click",z)}),R(()=>{document.removeEventListener("click",z)}),(o,t)=>(a(),l("div",Y,[e("div",J,[e("div",X,[e("div",Z,[e("div",ee,[t[0]||(t[0]=e("div",{class:"w-10 h-10 bg-gray-900 rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform duration-200"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})])],-1)),e("div",null,[e("h3",te,i(n.backup.name),1),e("p",se,i(n.backup.source)+" â†’ "+i(n.backup.destination),1)])])]),e("div",oe,[e("span",{class:N(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",_(n.backup.status)])},i(j(n.backup.status)),3),e("div",re,[e("button",{onClick:k,class:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-50 transition-all duration-200"},[...t[1]||(t[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})],-1)])]),u.value?(a(),l("div",ne,[e("div",{class:"py-2"},[e("button",{onClick:h,class:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200"},[...t[2]||(t[2]=[e("svg",{class:"w-4 h-4 mr-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),f(" View Details ",-1)])]),e("button",{onClick:$,class:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200"},[...t[3]||(t[3]=[e("svg",{class:"w-4 h-4 mr-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),f(" Edit ",-1)])]),e("button",{onClick:y,class:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200"},[...t[4]||(t[4]=[e("svg",{class:"w-4 h-4 mr-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),f(" Execute Now ",-1)])]),t[6]||(t[6]=e("div",{class:"border-t border-gray-200 my-1"},null,-1)),e("button",{onClick:b,class:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200"},[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4 mr-3 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),f(" Delete ",-1)])])])])):B("",!0)])])]),e("div",ae,[e("div",le,[t[7]||(t[7]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Schedule",-1)),e("p",ie,i(w(n.backup.schedule_type)),1)]),e("div",ue,[t[8]||(t[8]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Type",-1)),e("p",de,i(n.backup.type),1)]),e("div",ce,[t[9]||(t[9]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"File Type",-1)),e("p",pe,i(n.backup.file_type),1)]),e("div",me,[t[10]||(t[10]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Size",-1)),e("p",ge,i(T(n.backup.size_bytes)),1)])]),t[15]||(t[15]=e("div",{class:"border-t border-gray-200 mb-4"},null,-1)),e("div",xe,[e("div",ve,[e("div",fe,[t[11]||(t[11]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",ke,"Created: "+i(M(n.backup.created_at)),1)]),n.backup.completed_at&&n.backup.completed_at!=="0001-01-01T05:53:28+05:53"?(a(),l("div",he,[t[12]||(t[12]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",ye,"Last run: "+i(M(n.backup.completed_at)),1)])):B("",!0)]),n.backup.duration_sec>0?(a(),l("div",be,[t[13]||(t[13]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),e("span",null,i(L(n.backup.duration_sec)),1)])):B("",!0)]),n.backup.servers&&n.backup.servers.length>0?(a(),l("div",we,[t[14]||(t[14]=e("div",{class:"flex items-center space-x-2 mb-3"},[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})]),e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Servers")],-1)),e("div",Be,[(a(!0),l(A,null,E(n.backup.servers,g=>(a(),l("span",{key:g.id,class:"inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200 hover:bg-gray-200 transition-colors duration-200"},i(g.name),1))),128))])])):B("",!0)])]))}},Me={class:"min-h-screen bg-white"},$e={class:"bg-white border-b border-gray-200"},_e={class:"px-8 py-6"},je={class:"flex items-center justify-between"},Te={class:"flex space-x-3"},ze=["disabled"],Le={class:"px-8 py-8"},De={key:0,class:"flex items-center justify-center py-20"},Fe={key:1,class:"bg-white border border-red-200 rounded-lg p-6 mb-8"},Ve={class:"flex items-start"},Se={class:"ml-4"},He={class:"text-gray-600 mt-2"},Ne={key:2},Ae={class:"mb-8 flex items-center space-x-4"},Ee={class:"relative flex-1 max-w-md"},Re={key:0,class:"text-center py-20"},qe={key:1,class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6"},Ie={__name:"index",setup(n){const C=S(),p=c([]),m=c(!1),x=c(null),u=c(""),k=c(""),h=c(!1),$=c(""),y=c(null),b=c(""),_=c("success"),j=q(()=>{let r=p.value;if(u.value){const s=u.value.toLowerCase();r=r.filter(d=>d.name.toLowerCase().includes(s)||d.source.toLowerCase().includes(s)||d.destination.toLowerCase().includes(s))}return k.value&&(r=r.filter(s=>s.status===k.value)),r}),w=async()=>{try{m.value=!0,x.value=null,p.value=await P()}catch(r){x.value=r.message,console.error("Failed to load backups:",r)}finally{m.value=!1}},T=()=>{w()},M=()=>{C.push("/backup/create")},L=r=>{C.push(`/backup/edit/${r}`)},z=r=>{const s=p.value.find(d=>d.id===r);$.value=`Are you sure you want to delete "${s?.name||"this backup"}"? This action cannot be undone.`,y.value=r,h.value=!0},o=async()=>{try{await K(y.value),await w(),v("Backup deleted successfully","success")}catch(r){v(r.message||"Failed to delete backup","error"),console.error("Failed to delete backup:",r)}finally{h.value=!1,y.value=null}},t=()=>{h.value=!1,y.value=null},g=async r=>{try{await I(r),await w(),v("Backup executed successfully","success")}catch(s){v(s.message||"Failed to execute backup","error"),console.error("Failed to execute backup:",s)}},v=(r,s="success")=>{b.value=r,_.value=s,setTimeout(()=>{b.value=""},3e3)};return H(()=>{if(!G()){C.push("/auth/login");return}w()}),(r,s)=>(a(),l("div",Me,[e("div",$e,[e("div",_e,[e("div",je,[s[4]||(s[4]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Backups"),e("p",{class:"mt-2 text-gray-600"},"Manage your backup operations and schedules")],-1)),e("div",Te,[e("button",{onClick:T,disabled:m.value,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[(a(),l("svg",{class:N(["w-4 h-4 mr-2",{"animate-spin":m.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...s[2]||(s[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),f(" "+i(m.value?"Refreshing...":"Refresh"),1)],8,ze),e("button",{onClick:M,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},[...s[3]||(s[3]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),f(" New Backup ",-1)])])])])])]),e("main",Le,[m.value&&p.value.length===0?(a(),l("div",De,[...s[5]||(s[5]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),e("p",{class:"mt-6 text-lg text-gray-600 font-medium"},"Loading backups...")],-1)])])):x.value?(a(),l("div",Fe,[e("div",Ve,[s[7]||(s[7]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Se,[s[6]||(s[6]=e("h3",{class:"text-lg font-semibold text-red-800"},"Error loading backups",-1)),e("p",He,i(x.value),1),e("button",{onClick:T,class:"mt-4 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Try Again ")])])])):(a(),l("div",Ne,[e("div",Ae,[e("div",Ee,[F(e("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>u.value=d),type:"text",placeholder:"Search backups...",class:"w-full px-3 py-2 pl-10 border border-gray-300 rounded-md bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[O,u.value]]),s[8]||(s[8]=e("svg",{class:"w-4 h-4 absolute left-3 top-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),F(e("select",{"onUpdate:modelValue":s[1]||(s[1]=d=>k.value=d),class:"w-48 px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...s[9]||(s[9]=[V('<option value="">All Status</option><option value="pending">Pending</option><option value="running">Running</option><option value="completed">Completed</option><option value="failed">Failed</option>',5)])],512),[[U,k.value]])]),j.value.length===0?(a(),l("div",Re,[s[11]||(s[11]=V('<div class="w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-6"><svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path></svg></div><h3 class="text-2xl font-bold text-gray-900 mb-3">No backups found</h3><p class="text-gray-500 mb-8 max-w-md mx-auto">Get started by creating your first backup to protect your data</p>',3)),e("button",{onClick:M,class:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},[...s[10]||(s[10]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),f(" Create Your First Backup ",-1)])])])):(a(),l("div",qe,[(a(!0),l(A,null,E(j.value,d=>(a(),D(Ce,{key:d.id,backup:d,onEdit:L,onDelete:z,onExecute:g},null,8,["backup"]))),128))]))]))]),h.value?(a(),D(Q,{key:0,message:$.value,onConfirm:o,onCancel:t},null,8,["message"])):B("",!0),b.value?(a(),D(W,{key:1,message:b.value,type:_.value},null,8,["message","type"])):B("",!0)]))}};export{Ie as default};
